# Page Router 2
[date] 2025.08.27

-------------

## Page Router 사용하기

##### 일반 페이지 만들기!
1) 사용할 페이지 명 그대로 사용하기 : [pages] 폴더 내부에 파일명 작성하여 사용 <br>
[pages] 폴더 > search.tsx
2) 사용할 페이지 명으로 폴더 만들어 사용하기 : [pages] 폴더 내부에 폴더명으로 작성하여 사용 <br>
[pages] 폴더 > [search] 폴더 생성 > index.tsx 만들어 사용 = 기본 페이지<br>
[pages] 폴더 > [search] 폴더 생성 > setting.tsx 만들어 사용 = 추가 경로 페이지<br>
[pages] 폴더 > [search] 폴더 생성 > [setting] 폴더 만들어 내부에 파일 작성하여 사용 = 세부적으로 분리 후 사용<br>

##### 상세 페이지 만들기
1) 단일 구조 인 경우 : [카테고리명] 폴더 만든 뒤 [id].tsx로 기본 상세 페이지 셋팅<br>
(여기에서 사용한 [id]는 개발 내용에 따라 다른 단어([item] 등) 로 사용 가능)<br>
[pages] 폴더 > [list] 폴더 생성 > [list].tsx
2) 계층 구조 인 경우 : [카테고리명] 폴더 만든 뒤 [...id].tsx로 기본 상세 페이지 셋팅<br>
[pages] 폴더 > [items] 폴더 생성 > [...item].tsx
3) 경로 이탈 없이 만들고 싶은 경우 : [카테고리명] 폴더 만든 뒤 [[id]].tsx로 기본 상세 페이지 셋팅<br>대괄호를 2번 사용하면, 페이지 접속 시 id(또는 고유문자)가 없이 카테고리명만 사용 하더라도, 기본 페이지가 출력 됨<br>
[pages] 폴더 > [book] 폴더 생성 > [[...id]].tsx

##### 404 페이지 만들기
- [pages] 내부에 404.tsx 페이지 생성 후 내용 작성

-------------

## 네비게이팅 (Navigating)
: 페이지 이동을 의미

##### 페이지 이동 Link
- HTML로 작업 시 사용했던 <a>Tag 처럼 클릭으로 이동하는 경우 사용
- 상단에 import로 Link 불러온 후 return 문 안에 <Link href={경로}>경로 명칭</Link> 사용

##### 프로그래매틱 이동 useRouter
- 프로그래매틱한 페이지 이동 (Programmatic Navigation) : 사용자가 클릭 하는 기본적인 기능 외에도 미리 특정 조건을 설정하여 해당 내용에 부합하면 페이지가 이동하는 방식을 의미
- import { useRouter } from "next/router" 불러온 뒤, return문 밖에는 클릭 시 실행 될 함수를 적고, 해당 버튼등에 연결해서 사용

-------------

## 프리페칭 (Pre-fetching)
- 페이지를 사전에 미리 불러온다는 의미로, 사용자가 어떤 페이지를 보고 있을 때 그 페이지와 연결된 모든 링크의 페이지들을 미리 불러와 대기하고 있는 기능을 의미
- JS Bundle에 모든 페이지 정보가 있긴 하지만, 실질적으로 접속 한 페이지의 세부 번들만 클라이언트에 전달됨. 따라서 다른 페이지 이동 시에는 해당하는 번들을 다시 받아와야 하기에 시간이 걸림 
- 이러한 단점을 보완하기 위한 방식이 "프리페칭"

##### 프리패칭 확인하기
- 개발자 모드 내에서 [Network] 탭에 접속 해 보면, 현재 페이지의 번들 이 외에 <Link>로 이동 할 수 있는 다른 페이지의 번들이 확인 됨

##### 프리패칭 번들 불러오기 / 해제하기
- 번들 불러오기 : <Link> 처럼 바로 이동하는 번들에 대해서만 준비되어 있고, 프로그래매틱 이동을 하는 링크에 대해서는 준비되어 있지 않음. 따라서 useEffect를 이용하여 페이지 로딩 시 번들을 강제로 불러와야 함
- 번들 해제하기 : 해당하는 <Link>에 옵션으로 설정<br>
<Link href={경로} prefetch={false}>경로 이름</Link>

-------------

## API Routes
- next.js 에서 API를 구축 할 수 있게 해주는 기능
- 클라이언트의 요청에 맞는 알맞은 데이터를 불러오는 등 기본적인 웹 서버의 기능을 구현 가능 

##### 사용법
- [pages] 안에 [api]폴더의 hello.ts 파일 : api 역할을 할 수 있도록 셋팅하는 파일로, 개발 후 배포 시 백엔드의 기능을 함.
- [api] 폴더 안에 해당 파일 이외에도 여러 데이터 파일을 저장 해 두고 사용 가능

-------------

## 스타일 설정하기
- 인라인 스타일 : <h1 style={{ color : value }}>INDEX</h1>
- 파일 불러오기 1 _app.tsx : 상단에 import './styles/파일명.css'; 으로 사용 가능 
- 파일 불러오기 2 다른 페이지 파일들 : CSS Module 기능을 사용하여 불러오기<br>
    1) 스타일 시트 파일명 중간에 .module을 작성 해 줌
    2) 불러올 때  import style from './styles/파일명.module.css'; 으로 불러오기
    3) 해당하는 태그에 클래스로 적용하기 <h2 className={style.h2}>내용</h2> (일반 태그명으로는 사용되지 않음)

